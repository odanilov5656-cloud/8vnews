<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily News ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" style="text-decoration: none; color: white;"><h1>Daily News</h1></a>
            <nav>
                <ul id="nav-list">
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li id="auth-section"><a href="login.html">–í–æ–π—Ç–∏</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <h2 style="margin: 20px 0;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
        <div id="news-container" class="news-grid">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</p>
        </div>
    </main>

    <script>
        async function init() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–Ω–∞
            const user = localStorage.getItem('currentUser');
            if (user) {
                document.getElementById('auth-section').innerHTML = `<a href="profile.html">üë§ ${user}</a>`;
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–µ–π
            try {
                const res = await fetch('http://127.0.0.1:5000/get-articles');
                const articles = await res.json();
                const container = document.getElementById('news-container');
                
                if (articles.length === 0) {
                    container.innerHTML = "<p>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –Ω–∞–ø–∏—à–µ—Ç —Å—Ç–∞—Ç—å—é!</p>";
                    return;
                }

                container.innerHTML = '';
                articles.forEach(art => {
                    container.innerHTML += `
                        <article class="news-card">
                            <div class="content">
                                <span class="category" style="background: #e74c3c; color: white; padding: 2px 8px; border-radius: 3px; font-size: 12px;">${art.category}</span>
                                <h2 style="margin: 10px 0;">${art.title}</h2>
                                <p style="color: #666; font-size: 14px;">–ê–≤—Ç–æ—Ä: ${art.author}</p>
                                <a href="article.html?id=${art.id}" class="read-more" style="color: #3498db; text-decoration: none; font-weight: bold;">–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí</a>
                            </div>
                        </article>
                    `;
                });
            } catch (e) {
                document.getElementById('news-container').innerHTML = "<p style='color:red;'>–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É!</p>";
            }
        }
        window.onload = init;
    </script>
</body>
</html>

