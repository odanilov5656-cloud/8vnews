<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8V News ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="background: #f0f2f5; font-family: sans-serif; margin: 0;">
    <header style="background: #1a1a1a; color: white; padding: 15px 0;">
        <div class="container" style="max-width: 1000px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px;">
            <h1 style="margin: 0; font-size: 24px;">8V News</h1>
            <nav id="user-nav"></nav>
        </div>
    </header>

    <main class="container" style="max-width: 1000px; margin: 30px auto; padding: 0 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
            <a href="editor.html" style="background: #3498db; color: white; text-decoration: none; padding: 8px 15px; border-radius: 5px; font-size: 14px;">+ –ù–∞–ø–∏—Å–∞—Ç—å</a>
        </div>
        
        <div id="status" style="padding: 20px; text-align: center; color: #666;">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (–ø—Ä–æ–±—É–∂–¥–∞–µ–º —Å–µ—Ä–≤–µ—Ä)...</div>
        <div id="news-list"></div>
    </main>

    <script>
        const API = 'https://eightvnews.onrender.com';

        async function init() {
            // –Æ–∑–µ—Ä –≤ —à–∞–ø–∫–µ
            const user = localStorage.getItem('currentUser');
            document.getElementById('user-nav').innerHTML = user 
                ? `<a href="profile.html" style="color: #3498db; text-decoration: none;">üë§ ${user}</a>` 
                : `<a href="login.html" style="color: white;">–í–æ–π—Ç–∏</a>`;

            // –ó–∞–≥—Ä—É–∑–∫–∞
            try {
                const res = await fetch(`${API}/get-articles`);
                const data = await res.json();
                document.getElementById('status').style.display = 'none';
                
                const list = document.getElementById('news-list');
                if (data.length === 0) {
                    list.innerHTML = "<p>–°—Ç–∞—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç. –ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤—É—é!</p>";
                } else {
                    list.innerHTML = data.map(a => `
                        <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                            <span style="color: #3498db; font-size: 12px; font-weight: bold;">${a.category}</span>
                            <h3 style="margin: 10px 0;">${a.title}</h3>
                            <p style="font-size: 14px; color: #555;">–ê–≤—Ç–æ—Ä: ${a.author}</p>
                            <a href="article.html?id=${a.id}" style="color: #e74c3c; text-decoration: none; font-weight: bold;">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí</a>
                        </div>
                    `).join('');
                }
            } catch (e) {
                document.getElementById('status').innerHTML = "‚è≥ –°–µ—Ä–≤–µ—Ä –µ—â–µ —Å–ø–∏—Ç. <br> <button onclick='location.reload()' style='margin-top:10px; padding:5px 15px;'>–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>";
            }
        }
        window.onload = init;
    </script>
</body>
</html>

